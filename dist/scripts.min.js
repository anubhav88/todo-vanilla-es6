function init(){var t=new TodoData([]),o=new TodoTemplate,e=new View(o);new TodoController(t,e)}window.onload=function(){init()};var TodoTemplate=function(){};TodoTemplate.prototype.showTodo=function(t){var o="";return _.each(t,function(t){o=o+'<li data-id="'+t.id+'" class="todo-li">'+t.text+'<button class="destroy">delete</button></li>'}),o};var Todo=function(t,o){this.text=t,this.status=o},TodoController=function(t,o){this.store=t,this.todoView=o,this.todoView.bindDeleteNodeClickHandler(this.remove.bind(this)),this.todoView.bindAddNodeClickHandler(this.addItem.bind(this))};TodoController.prototype.addItem=function(t){this.store.addTodo({text:t,status:"Active"},this.todoView.addItem.bind(this.todoView))},TodoController.prototype.remove=function(t){this.store.removeTodo(t,this.todoView.removeTodo.bind(this.todoView))};var TodoData=function(t){this.todos=t};TodoData.prototype.addTodo=function(t,o){t.id=this.todos.length,this.todos.push(t),o&&o(this.todos)},TodoData.prototype.removeTodo=function(t,o){for(var e=this.todos.length-1;e>=0;e--)this.todos[e].id==t&&this.todos.splice(e,1);console.log(this.todos),o&&o(t)};var View=function(t){this.templateHtml=t,this.ulElement=document.getElementsByClassName("todo-list")[0],this.addTodo=document.getElementsByClassName("add-todo")[0],this.newTodoInput=document.getElementsByClassName("new-todo")[0]};View.prototype.addItem=function(t){this.ulElement.innerHTML=this.templateHtml.showTodo(t)},View.prototype.removeTodo=function(t){for(var o=document.getElementsByClassName("todo-li"),e=this.ulElement,i=0;i<o.length;i++){var d=o[i];d.getAttribute("data-id")==t&&e.removeChild(d)}},View.prototype.bindAddNodeClickHandler=function(t){var o=this.newTodoInput;this.addTodo.addEventListener("click",function(e){t(o.value)})},View.prototype.bindDeleteNodeClickHandler=function(t){this.ulElement;this.ulElement.addEventListener("click",function(o){for(var e=this.getElementsByClassName("destroy"),i=o.target||o.srcElement,d=0;d<e.length;d++)if(e[d]==i){var n=i.parentElement.getAttribute("data-id");t(n)}})};