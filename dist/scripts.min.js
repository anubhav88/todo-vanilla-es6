"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function init(){var e=new _todoData2.default([]),t=new _template2.default,o=new _view2.default(t);new _todoController2.default(e,o)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _todoController=require("./todoController"),_todoController2=_interopRequireDefault(_todoController),_template=require("./template"),_template2=_interopRequireDefault(_template),_todoData=require("./todoData"),_todoData2=_interopRequireDefault(_todoData),_view=require("./view"),_view2=_interopRequireDefault(_view);window.onload=function(){init()};var _createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),TodoTemplate=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"showTodo",value:function(e){return e.reduce(function(e,t){return e+'<li data-id="'+t.id+'" class="todo-li">'+t.text+'<button class="destroy">delete</button></li>'},"")}}]),e}(),Todo=function e(t,o){_classCallCheck(this,e),this.text=t,this.status=o},_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),TodoController=function(){function e(t,o){_classCallCheck(this,e),this.store=t,this.todoView=o,this.todoView.bindDeleteNodeClickHandler(this.remove.bind(this)),this.todoView.bindAddNodeClickHandler(this.addItem.bind(this))}return _createClass(e,[{key:"addItem",value:function(e){this.store.addTodo({text:e,status:"Active"},this.todoView.addItem.bind(this.todoView))}},{key:"remove",value:function(e){this.store.removeTodo(e,this.todoView.removeTodo.bind(this.todoView))}}]),e}(),_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),TodoData=function(){function e(t){_classCallCheck(this,e),this.todos=t}return _createClass(e,[{key:"addTodo",value:function(e,t){e.id=this.todos.length,this.todos.push(e),t&&t(this.todos)}},{key:"removeTodo",value:function(e,t){for(var o=this.todos.length-1;o>=0;o--)this.todos[o].id==e&&this.todos.splice(o,1);console.log(this.todos),t&&t(e)}}]),e}(),_createClass=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),View=function(){function e(t){_classCallCheck(this,e),this.templateHtml=t,this.ulElement=document.getElementsByClassName("todo-list")[0],this.addTodo=document.getElementsByClassName("add-todo")[0],this.newTodoInput=document.getElementsByClassName("new-todo")[0]}return _createClass(e,[{key:"addItem",value:function(e){this.ulElement.innerHTML=this.templateHtml.showTodo(e)}},{key:"removeTodo",value:function(e){for(var t=document.getElementsByClassName("todo-li"),o=this.ulElement,n=0;n<t.length;n++){var a=t[n];a.getAttribute("data-id")==e&&o.removeChild(a)}}},{key:"bindAddNodeClickHandler",value:function(e){var t=this.newTodoInput;this.addTodo.addEventListener("click",function(o){e(t.value)})}},{key:"bindDeleteNodeClickHandler",value:function(e){this.ulElement;this.ulElement.addEventListener("click",function(t){for(var o=this.getElementsByClassName("destroy"),n=t.target||t.srcElement,a=0;a<o.length;a++)if(o[a]==n){var i=n.parentElement.getAttribute("data-id");e(i)}})}}]),e}();